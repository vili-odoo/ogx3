var Ue=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var _=(t,e,n)=>(Ue(t,e,"read from private field"),n?n.call(t):e.get(t)),F=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},M=(t,e,n,l)=>(Ue(t,e,"write to private field"),l?l.call(t,n):e.set(t,n),n),it=(t,e,n,l)=>({set _(r){M(t,e,r,n)},get _(){return _(t,e,l)}}),Fe=(t,e,n)=>(Ue(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function w(){}function jt(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Gt(t){return t()}function at(){return Object.create(null)}function ye(t){t.forEach(Gt)}function Ct(t){return typeof t=="function"}function fe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ne;function je(t,e){return Ne||(Ne=document.createElement("a")),Ne.href=e,t===Ne.href}function At(t){return Object.keys(t).length===0}function qt(t,...e){if(t==null)return w;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function zt(t,e,n){t.$$.on_destroy.push(qt(e,n))}function y(t,e){t.appendChild(e)}function D(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode&&t.parentNode.removeChild(t)}function me(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function I(t){return document.createElement(t)}function N(t){return document.createTextNode(t)}function E(){return N(" ")}function q(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Bt(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ot(t,e,n){t.classList[n?"add":"remove"](e)}let ke;function X(t){ke=t}function Rt(){if(!ke)throw new Error("Function called outside component initialization");return ke}const pe=[],ct=[],We=[],ft=[],Ut=Promise.resolve();let Ze=!1;function Kt(){Ze||(Ze=!0,Ut.then($e))}function Je(t){We.push(t)}const Ke=new Set;let Se=0;function $e(){const t=ke;do{for(;Se<pe.length;){const e=pe[Se];Se++,X(e),Xt(e.$$)}for(X(null),pe.length=0,Se=0;ct.length;)ct.pop()();for(let e=0;e<We.length;e+=1){const n=We[e];Ke.has(n)||(Ke.add(n),n())}We.length=0}while(pe.length);for(;ft.length;)ft.pop()();Ze=!1,Ke.clear(),X(t)}function Xt(t){if(t.fragment!==null){t.update(),ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Je)}}const Pe=new Set;let ie;function Mt(){ie={r:0,c:[],p:ie}}function Ft(){ie.r||ye(ie.c),ie=ie.p}function R(t,e){t&&t.i&&(Pe.delete(t),t.i(e))}function Z(t,e,n,l){if(t&&t.o){if(Pe.has(t))return;Pe.add(t),ie.c.push(()=>{Pe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ut(t,e){const n=e.token={};function l(r,s,i,f){if(e.token!==n)return;e.resolved=f;let c=e.ctx;i!==void 0&&(c=c.slice(),c[i]=f);const a=r&&(e.current=r)(c);let h=!1;e.block&&(e.blocks?e.blocks.forEach((g,u)=>{u!==s&&g&&(Mt(),Z(g,1,1,()=>{e.blocks[u]===g&&(e.blocks[u]=null)}),Ft())}):e.block.d(1),a.c(),R(a,1),a.m(e.mount(),e.anchor),h=!0),e.block=a,e.blocks&&(e.blocks[s]=a),h&&$e()}if(jt(t)){const r=Rt();if(t.then(s=>{X(r),l(e.then,1,e.value,s),X(null)},s=>{if(X(r),l(e.catch,2,e.error,s),X(null),!e.hasCatch)throw s}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function ht(t,e,n){const l=e.slice(),{resolved:r}=t;t.current===t.then&&(l[t.value]=r),t.current===t.catch&&(l[t.error]=r),t.block.p(l,n)}function Zt(t,e){Z(t,1,1,()=>{e.delete(t.key)})}function Jt(t,e,n,l,r,s,i,f,c,a,h,g){let u=t.length,o=s.length,m=u;const d={};for(;m--;)d[t[m].key]=m;const b=[],T=new Map,G=new Map;for(m=o;m--;){const H=g(r,s,m),j=n(H);let A=i.get(j);A?l&&A.p(H,e):(A=a(j,H),A.c()),T.set(j,b[m]=A),j in d&&G.set(j,Math.abs(m-d[j]))}const p=new Set,Q=new Set;function te(H){R(H,1),H.m(f,h),i.set(H.key,H),h=H.first,o--}for(;u&&o;){const H=b[o-1],j=t[u-1],A=H.key,S=j.key;H===j?(h=H.first,u--,o--):T.has(S)?!i.has(A)||p.has(A)?te(H):Q.has(S)?u--:G.get(A)>G.get(S)?(Q.add(A),te(H)):(p.add(S),u--):(c(j,i),u--)}for(;u--;){const H=t[u];T.has(H.key)||c(H,i)}for(;o;)te(b[o-1]);return b}function we(t){t&&t.c()}function he(t,e,n,l){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),l||Je(()=>{const i=t.$$.on_mount.map(Gt).filter(Ct);t.$$.on_destroy?t.$$.on_destroy.push(...i):ye(i),t.$$.on_mount=[]}),s.forEach(Je)}function de(t,e){const n=t.$$;n.fragment!==null&&(ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Qt(t,e){t.$$.dirty[0]===-1&&(pe.push(t),Kt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function _e(t,e,n,l,r,s,i,f=[-1]){const c=ke;X(t);const a=t.$$={fragment:null,ctx:[],props:s,update:w,not_equal:r,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:at(),dirty:f,skip_bound:!1,root:e.target||c.$$.root};i&&i(a.root);let h=!1;if(a.ctx=n?n(t,e.props||{},(g,u,...o)=>{const m=o.length?o[0]:u;return a.ctx&&r(a.ctx[g],a.ctx[g]=m)&&(!a.skip_bound&&a.bound[g]&&a.bound[g](m),h&&Qt(t,g)),u}):[],a.update(),h=!0,ye(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const g=Bt(e.target);a.fragment&&a.fragment.l(g),g.forEach(L)}else a.fragment&&a.fragment.c();e.intro&&R(t.$$.fragment),he(t,e.target,e.anchor,e.customElement),$e()}X(c)}class Ie{$destroy(){de(this,1),this.$destroy=w}$on(e,n){if(!Ct(n))return w;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!At(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ue=[];function Yt(t,e=w){let n;const l=new Set;function r(f){if(fe(t,f)&&(t=f,n)){const c=!ue.length;for(const a of l)a[1](),ue.push(a,t);if(c){for(let a=0;a<ue.length;a+=2)ue[a][0](ue[a+1]);ue.length=0}}}function s(f){r(f(t))}function i(f,c=w){const a=[f,c];return l.add(a),l.size===1&&(n=e(r)||w),f(t),()=>{l.delete(a),l.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:i}}const dt=Yt([]),ee={WIDTH:512,HEIGHT:256,FPS:25,FRAMECOUNT:100,DEFINITIONS:{nature:{galaxy:[]},"solid-colors":{black:[],"gray-dark":[],gray:[],"gray-light":[],white:[],"purple-dark":[],purple:[],"purple-light":[],"red-dark":[],red:[],"red-light":[],"orange-dark":[],orange:[],"orange-light":[],"yellow-dark":[],yellow:[],"yellow-light":[],"green-dark":[],green:[],"green-light":[],"teal-dark":[],teal:[],"teal-light":[],"blue-dark":[],blue:[],"blue-light":[],"violet-dark":[],violet:[],"violet-light":[]},text:{mastr:[],v15:[],v16:[],v17:[],bug:[],issue:[]}}};for(const t in ee.DEFINITIONS)for(const e in ee.DEFINITIONS[t])ee.DEFINITIONS[t][e].push("-");const z=(t,e)=>Math.pow(t+e/3,5)*123456789%1,Ae=t=>{const e=Object.keys(t);return e[Math.floor(Math.random()*e.length)]},gt=t=>document.getElementById(t).getContext("2d"),Xe=(t,e)=>{t.filter==="none"?t.filter=e:t.filter=t.filter+" "+e},Nt={blurred:(t,e,n)=>{Xe(t,`blur(${Math.ceil(n.WIDTH/32)}px)`)},inverted:(t,e,n)=>{Xe(t,"invert(1)")},saturated:(t,e,n)=>{Xe(t,"saturate(8)")},shaking:(t,e,n)=>{const l=Math.max(n.WIDTH,n.HEIGHT)/30,r=Math.round(l*(z(e,0)-.5)),s=Math.round(l*(z(e,.1)-.5));t.translate(r,s),t.translate(n.WIDTH/2,n.HEIGHT/2),t.scale(1+l/n.WIDTH,1+l/n.HEIGHT),t.translate(-n.WIDTH/2,-n.HEIGHT/2)},rotating:(t,e,n)=>{const l=.06666666666666667,r=(Math.abs(e%l-l/2)-l/4)*(2*Math.PI);t.translate(n.WIDTH/2,n.HEIGHT/2),t.scale(1.5,1.5),t.rotate(r),t.translate(-n.WIDTH/2,-n.HEIGHT/2)},spinning:(t,e,n)=>{const l=e*(2*Math.PI);t.translate(n.WIDTH/2,n.HEIGHT/2),t.rotate(l),t.translate(-n.WIDTH/2,-n.HEIGHT/2)},zooming:(t,e,n)=>{const r=e%.25/.25,s=.1;let i=1;r<s&&(i+=(s/2-Math.abs(r-s/2))*3.5),t.translate(n.WIDTH/2,n.HEIGHT/2),t.scale(i,i),t.translate(-n.WIDTH/2,-n.HEIGHT/2)}};var Te,U,B;class Ge{constructor(e){F(this,Te,void 0);F(this,U,void 0);F(this,B,void 0);M(this,Te,e),M(this,U,[]),M(this,B,[])}get category(){return null}get item(){return null}get conf(){return _(this,Te)}get effects(){return[..._(this,U)]}get images(){return[..._(this,B)]}getElems(e){return _(this,B).map(n=>n.getElem(e))}addEffect(e){_(this,U).push(e)}removeEffect(e){M(this,U,_(this,U).filter(n=>n!==e))}addImage(e){_(this,B).push(e)}removeImage(e){_(this,B).splice(e,1)}draw(e,n){}drawImage(e,n,l,r,s,i,f,c){e.save(),e.translate(r,s),e.rotate(c),e.drawImage(_(this,B)[l].getElem(n),-i/2,-f/2,i,f),e.restore()}paint(e,n){if(_(this,B).length>0){e.save();for(const l of _(this,U))l(e,n,this.conf);this.draw(e,n),e.restore()}}}Te=new WeakMap,U=new WeakMap,B=new WeakMap;class xe extends Ge{get category(){return"full-frame"}}class Vt extends xe{get item(){return"static"}draw(e,n){const l=this.conf.WIDTH,r=this.conf.HEIGHT;for(let s=0;s<this.images.length;s++)this.drawImage(e,n,s,l/2,r/2,l,r,0)}}class $t extends xe{get item(){return"zoom"}draw(e,n){const l=this.conf.WIDTH,r=this.conf.HEIGHT;for(let s=0;s<this.images.length;s++)this.drawImage(e,n,s,l/2,r/2,l*1.5,r*1.5,0)}}class xt extends xe{get item(){return"blink"}draw(e,n){const l=this.conf.WIDTH,r=this.conf.HEIGHT,s=Math.floor(n*this.images.length);this.drawImage(e,n,s,l/2,r/2,l,r,0)}}class be extends Ge{get category(){return"mini"}drawMini(e,n,l,r){for(let s=0;s<this.images.length;s++){const i=this.conf.WIDTH,f=this.conf.HEIGHT;this.drawImage(e,n,s,l*i/2+i/4,r*f/2+f/4,i/2,f/2,0)}}}class en extends be{get item(){return"center"}draw(e,n){this.drawMini(e,n,.5,.5)}}class tn extends be{get item(){return"bottom"}draw(e,n){this.drawMini(e,n,.5,1)}}class nn extends be{get item(){return"top-left"}draw(e,n){this.drawMini(e,n,0,0)}}class ln extends be{get item(){return"top-right"}draw(e,n){this.drawMini(e,n,1,0)}}class rn extends be{get item(){return"bottom-right"}draw(e,n){this.drawMini(e,n,1,1)}}class sn extends be{get item(){return"bottom-left"}draw(e,n){this.drawMini(e,n,0,1)}}class et extends Ge{get category(){return"strip"}getLengths(e){const n=this.conf.WIDTH,l=this.conf.HEIGHT,r=Math.min(n/e,l),s=r*n/l,i=r,f=(n-r*e)/2+r/2,c=l/2;return{x:f,y:c,width:s,height:i}}}class an extends et{get item(){return"static"}draw(e,n){const{x:l,y:r,width:s,height:i}=this.getLengths(this.images.length);for(let f=0;f<this.images.length;f++)this.drawImage(e,n,f,l+f*i,r,s,i,0)}}class on extends et{get item(){return"window"}draw(e,n){const l=.3333333333333333,r=n%l/l,s=this.images.length,i=Math.min(s<4?1:s<6?2:3,s),f=Math.floor(s*r),c=f+i,{x:a,y:h,width:g,height:u}=this.getLengths(s);for(let o=0;o<s;o++)(o>=f&&o<c||c>s&&o<c%s)&&this.drawImage(e,n,o,a+o*u,h,g,u,0)}}class cn extends et{get item(){return"slide"}draw(e,n){const l=this.conf.WIDTH,{x:r,y:s,width:i,height:f}=this.getLengths(this.images.length);for(let c=0;c<3;c++)for(let a=0;a<this.images.length;a++){const h=r+f*(a-.5)+l*(c-n);this.drawImage(e,n,a,h,s,i,f,0)}}}class St extends Ge{get category(){return"counter"}getRepetitions(e){return Math.max(2,6-e)}getNewT(e,n){return e*n%1}}class fn extends St{get item(){return"increase"}draw(e,n){const l=this.conf.WIDTH/4,r=this.conf.HEIGHT/4,s=this.getRepetitions(this.images.length);for(let i=0;i<3;i++){const f=i*l+l/2,c=this.getNewT(n,Math.pow(4,i));for(let a=0;a<s;a++){const h=(a-c)*r*this.images.length;for(let g=0;g<this.images.length;g++){const u=r*g+h+r/2;this.drawImage(e,n,g,f,u,l,r,0)}}}}}class un extends St{get item(){return"slot-machine"}draw(e,n){const l=this.conf.WIDTH/4,r=this.conf.HEIGHT/4,s=1+this.getRepetitions(this.images.length);for(let i=0;i<3;i++){const c=2*[5,7,4][i]-1,a=n<.15?1+(c-1)*n/.15:c-(c-1)*(n-.15)/(1-.15),h=n<.15?n*(1+(a-1)/2):.15*(1+(c-1)/2)+(n-.15)*(a+(c-a)/2),g=this.getNewT(h,Math.max(1,3-Math.floor(this.images.length/2))),u=i*l+l/2;for(let o=0;o<s;o++){const m=o-s+(this.images.length<3?4:2);for(let d=0;d<this.images.length;d++){const b=r*(d+1.5+this.images.length*(m-g))+r/2;this.drawImage(e,n,d,u,b,l,r,0)}}}}}class Wt extends Ge{get category(){return"particle"}calculateCoords(e,n,l,r,s,i){const f=e+s*l,c=r-s*i;let a=n;return c>=0?a-=s*(c+(r-c)/2):r>=0?a-=r*r/i/2+(s-r/i)*c/2:a-=s*(r-(r-c)/2),{x:f,y:a}}}class hn extends Wt{get item(){return"explosion"}draw(e,n){const r=this.conf.WIDTH*.25,s=this.conf.HEIGHT*.25,i=.7,f=Math.ceil(400/this.images.length);for(let c=0;c<f;c++)for(let a=0;a<this.images.length;a++){e.save();let h=this.conf.WIDTH/2,g=this.conf.HEIGHT*3/4,u=0;if(n>=i){const o=(c+a/this.images.length)/f,m=2*Math.PI*(.5*z(o,0)+(z(o,.1)<.7?0:.5)),d=1+4*z(o,.2),b=Math.cos(m)*d,T=Math.sin(m)*d,G=(n-i)/(1-i),p=this.calculateCoords(h/this.conf.WIDTH,g/this.conf.HEIGHT,b,T,G,1.8);h=p.x*this.conf.WIDTH,g=p.y*this.conf.HEIGHT,u+=2*Math.PI*G*1.2*(z(o,.3)-.5)}this.drawImage(e,n,a,h,g,r,s,u),e.restore()}}}class dn extends Wt{get item(){return"confetti"}draw(e,n){const r=this.conf.WIDTH*.25,s=this.conf.HEIGHT*.25,i=Math.ceil(400/this.images.length);for(let f=0;f<i;f++)for(let c=0;c<this.images.length;c++){e.save();const a=(f+c/this.images.length)/i;let h=this.conf.WIDTH*(.4+.2*z(a,0)),g=this.conf.HEIGHT*(1+5*z(a,.1)),u=0;const o=7*(z(a,.2)-.5),m=25+10*z(a,.3),d=this.calculateCoords(h/this.conf.WIDTH,g/this.conf.HEIGHT,o,m,n,80);h=d.x*this.conf.WIDTH,g=d.y*this.conf.HEIGHT,u+=2*Math.PI*n*3*(z(a,.4)-.5),this.drawImage(e,n,c,h,g,r,s,u),e.restore()}}}const gn=[Vt,$t,xt,en,tn,nn,ln,rn,sn,an,on,cn,fn,un,hn,dn],x={};for(const t of gn){const e=new t({});e.category in x||(x[e.category]={}),x[e.category][e.item]=t}var Ee,ae,oe,Le,ge,ce,He,Qe;class mn{constructor(e,n,l,r){F(this,He);F(this,Ee,void 0);F(this,ae,void 0);F(this,oe,void 0);F(this,Le,void 0);F(this,ge,void 0);F(this,ce,void 0);M(this,Ee,e),M(this,ae,n),M(this,oe,l),M(this,Le,r),M(this,ge,{}),M(this,ce,null)}get category(){return _(this,ae)}get item(){return _(this,oe)}get loadPromise(){return _(this,ce)}getElem(e){for(const n of _(this,He,Qe))if(n==="-"||e<=parseFloat("0."+n))return _(this,ge)[n]}load(){return M(this,ce,Promise.all(_(this,He,Qe).map(e=>new Promise((n,l)=>{const r=new Image;_(this,ge)[e]=r,r.onload=n,r.onerror=l,r.src=`./images/${_(this,ae)}/${_(this,oe)}/${e}${_(this,Le)}`})))),_(this,ce)}}Ee=new WeakMap,ae=new WeakMap,oe=new WeakMap,Le=new WeakMap,ge=new WeakMap,ce=new WeakMap,He=new WeakSet,Qe=function(){return _(this,Ee).DEFINITIONS[_(this,ae)][_(this,oe)]};var O,K,W,$,De,Ye,Oe,Ve,qe,Pt;class yn{constructor(e){F(this,De);F(this,Oe);F(this,qe);F(this,O,void 0);F(this,K,void 0);F(this,W,void 0);F(this,$,void 0);M(this,O,e),M(this,K,{}),M(this,W,[]),M(this,$,0);for(const n in _(this,O).DEFINITIONS){_(this,K)[n]={};for(const l in _(this,O).DEFINITIONS[n])_(this,K)[n][l]=null}}get layers(){return[..._(this,W)]}getImage(e,n){return _(this,K)[e][n]}init(){const e=[];for(const n in _(this,O).DEFINITIONS)for(const l in _(this,O).DEFINITIONS[n]){const r=new Promise((s,i)=>{const f=new Image;f.onload=s,f.onerror=i,f.src=`./images/${n}/${l}.gif`}).catch(()=>{});e.push(r)}return Promise.all(e).then(()=>{setInterval(()=>window.requestAnimationFrame(Fe(this,qe,Pt).bind(this)),_(this,De,Ye))})}loadImage(e,n,l){let r=this.getImage(e,n);return r!==null?r.loadPromise:(r=new mn(_(this,O),e,n,l),_(this,K)[e][n]=r,r.load().catch(()=>(_(this,K)[e][n]=null,Promise.reject())))}addLayer(e,n){const l=new e({..._(this,O)});if(n===null){_(this,W).push(l);const r=Ae(_(this,O).DEFINITIONS),s=Ae(_(this,O).DEFINITIONS[r]);return this.loadImage(r,s,".png").then(()=>{l.addImage(this.getImage(r,s))}).catch(()=>{})}_(this,W)[_(this,W).indexOf(n)]=l;for(const r of n.effects)l.addEffect(r);for(const r of n.images)l.addImage(r);return Promise.resolve()}removeLayer(e){M(this,W,_(this,W).filter(n=>n!==e))}moveLayer(e,n){const l=_(this,W).indexOf(e),r=l+(n?1:-1);_(this,W)[l]=_(this,W)[r],_(this,W)[r]=e}generateGif(){const e=new GIF({width:_(this,O).WIDTH,height:_(this,O).HEIGHT}),n=gt("generate");for(let l=0;l<_(this,O).FRAMECOUNT;l++)Fe(this,Oe,Ve).call(this,n,l),e.addFrame(n,{copy:!0,delay:_(this,De,Ye)});e.on("finished",l=>window.open(URL.createObjectURL(l))),e.render()}}O=new WeakMap,K=new WeakMap,W=new WeakMap,$=new WeakMap,De=new WeakSet,Ye=function(){return Math.ceil(1e3/_(this,O).FPS)},Oe=new WeakSet,Ve=function(e,n){e.clearRect(0,0,_(this,O).WIDTH,_(this,O).HEIGHT),e.fillStyle="#fff",e.fillRect(0,0,_(this,O).WIDTH,_(this,O).HEIGHT);for(const l of _(this,W))l.paint(e,n/_(this,O).FRAMECOUNT)},qe=new WeakSet,Pt=function(){Fe(this,Oe,Ve).call(this,gt("preview"),_(this,$)),it(this,$)._++,_(this,$)===_(this,O).FRAMECOUNT&&M(this,$,0)};function mt(t,e,n){const l=t.slice();return l[6]=e[n],l}function yt(t,e,n){const l=t.slice();return l[9]=e[n],l}function _t(t){let e,n=t[9]+"",l,r,s,i;function f(){return t[4](t[9])}return{c(){e=I("button"),l=N(n),e.disabled=r=t[3]===t[9]},m(c,a){D(c,e,a),y(e,l),s||(i=q(e,"click",f),s=!0)},p(c,a){t=c,a&1&&n!==(n=t[9]+"")&&J(l,n),a&9&&r!==(r=t[3]===t[9])&&(e.disabled=r)},d(c){c&&L(e),s=!1,i()}}}function It(t){let e,n=t[6]+"",l,r,s,i;function f(){return t[5](t[6])}return{c(){e=I("button"),l=N(n),e.disabled=r=t[1].layer.category===t[3]&&t[1].layer.item===t[6]},m(c,a){D(c,e,a),y(e,l),s||(i=q(e,"click",f),s=!0)},p(c,a){t=c,a&9&&n!==(n=t[6]+"")&&J(l,n),a&11&&r!==(r=t[1].layer.category===t[3]&&t[1].layer.item===t[6])&&(e.disabled=r)},d(c){c&&L(e),s=!1,i()}}}function _n(t){let e,n,l,r,s,i,f,c,a=Object.keys(t[0]),h=[];for(let o=0;o<a.length;o+=1)h[o]=_t(yt(t,a,o));let g=Object.keys(t[0][t[3]]),u=[];for(let o=0;o<g.length;o+=1)u[o]=It(mt(t,g,o));return{c(){e=I("div"),n=I("div"),l=I("p"),l.textContent="Types of layers:",r=E();for(let o=0;o<h.length;o+=1)h[o].c();s=E(),i=I("div"),f=I("p"),f.textContent="Subtypes:",c=E();for(let o=0;o<u.length;o+=1)u[o].c();k(n,"class","block sequence"),k(i,"class","block sequence"),k(e,"class","container grid")},m(o,m){D(o,e,m),y(e,n),y(n,l),y(n,r);for(let d=0;d<h.length;d+=1)h[d].m(n,null);y(e,s),y(e,i),y(i,f),y(i,c);for(let d=0;d<u.length;d+=1)u[d].m(i,null)},p(o,[m]){if(m&9){a=Object.keys(o[0]);let d;for(d=0;d<a.length;d+=1){const b=yt(o,a,d);h[d]?h[d].p(b,m):(h[d]=_t(b),h[d].c(),h[d].m(n,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=a.length}if(m&15){g=Object.keys(o[0][o[3]]);let d;for(d=0;d<g.length;d+=1){const b=mt(o,g,d);u[d]?u[d].p(b,m):(u[d]=It(b),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=g.length}},i:w,o:w,d(o){o&&L(e),me(h,o),me(u,o)}}}function In(t,e,n){let{layerClasses:l}=e,{layerData:r}=e,{replaceLayer:s}=e,i=r.layer.category;const f=a=>{n(3,i=a)},c=a=>{s(i,a,r.layer)};return t.$$set=a=>{"layerClasses"in a&&n(0,l=a.layerClasses),"layerData"in a&&n(1,r=a.layerData),"replaceLayer"in a&&n(2,s=a.replaceLayer)},[l,r,s,i,f,c]}class bn extends Ie{constructor(e){super(),_e(this,e,In,_n,fe,{layerClasses:0,layerData:1,replaceLayer:2})}}function bt(t,e,n){const l=t.slice();return l[6]=e[n],l}function vt(t){let e,n=(t[1].effects[t[6]]?"✓ "+t[6]:t[6])+"",l,r,s,i;function f(){return t[5](t[6])}return{c(){e=I("button"),l=N(n),r=E()},m(c,a){D(c,e,a),y(e,l),y(e,r),s||(i=q(e,"click",f),s=!0)},p(c,a){t=c,a&3&&n!==(n=(t[1].effects[t[6]]?"✓ "+t[6]:t[6])+"")&&J(l,n)},d(c){c&&L(e),s=!1,i()}}}function vn(t){let e,n,l,r=Object.keys(t[0]),s=[];for(let i=0;i<r.length;i+=1)s[i]=vt(bt(t,r,i));return{c(){e=I("div"),n=I("p"),n.textContent="Effects on this layer:",l=E();for(let i=0;i<s.length;i+=1)s[i].c();k(e,"class","block sequence")},m(i,f){D(i,e,f),y(e,n),y(e,l);for(let c=0;c<s.length;c+=1)s[c].m(e,null)},p(i,[f]){if(f&7){r=Object.keys(i[0]);let c;for(c=0;c<r.length;c+=1){const a=bt(i,r,c);s[c]?s[c].p(a,f):(s[c]=vt(a),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=r.length}},i:w,o:w,d(i){i&&L(e),me(s,i)}}}function pn(t,e,n){let{effects:l}=e,{layerData:r}=e,{addEffect:s}=e,{removeEffect:i}=e;const f=a=>{const h=l[a];r.effects[a]?i(r.layer,h):s(r.layer,h)},c=a=>{f(a)};return t.$$set=a=>{"effects"in a&&n(0,l=a.effects),"layerData"in a&&n(1,r=a.layerData),"addEffect"in a&&n(3,s=a.addEffect),"removeEffect"in a&&n(4,i=a.removeEffect)},[l,r,f,s,i,c]}class wn extends Ie{constructor(e){super(),_e(this,e,pn,vn,fe,{effects:0,layerData:1,addEffect:3,removeEffect:4})}}function pt(t,e,n){const l=t.slice();return l[3]=e[n],l[5]=n,l}function wt(t){let e,n,l,r,s,i,f,c,a;function h(){return t[2](t[5])}return{c(){e=I("button"),n=I("img"),s=E(),i=I("p"),i.textContent="✕",f=E(),je(n.src,l=`./images/${t[3].category}/${t[3].item}.gif`)||k(n,"src",l),k(n,"alt",r=`${t[3].category} ${t[3].item}`)},m(g,u){D(g,e,u),y(e,n),y(e,s),y(e,i),y(e,f),c||(a=q(e,"click",h),c=!0)},p(g,u){t=g,u&1&&!je(n.src,l=`./images/${t[3].category}/${t[3].item}.gif`)&&k(n,"src",l),u&1&&r!==(r=`${t[3].category} ${t[3].item}`)&&k(n,"alt",r)},d(g){g&&L(e),c=!1,a()}}}function kn(t){let e,n,l,r=t[0].images,s=[];for(let i=0;i<r.length;i+=1)s[i]=wt(pt(t,r,i));return{c(){e=I("div"),n=I("p"),n.textContent="Images in this layer:",l=E();for(let i=0;i<s.length;i+=1)s[i].c();k(e,"class","block sequence")},m(i,f){D(i,e,f),y(e,n),y(e,l);for(let c=0;c<s.length;c+=1)s[c].m(e,null)},p(i,[f]){if(f&3){r=i[0].images;let c;for(c=0;c<r.length;c+=1){const a=pt(i,r,c);s[c]?s[c].p(a,f):(s[c]=wt(a),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=r.length}},i:w,o:w,d(i){i&&L(e),me(s,i)}}}function Tn(t,e,n){let{layerData:l}=e,{removeImageFromLayer:r}=e;const s=i=>{r(l.layer,i)};return t.$$set=i=>{"layerData"in i&&n(0,l=i.layerData),"removeImageFromLayer"in i&&n(1,r=i.removeImageFromLayer)},[l,r,s]}class En extends Ie{constructor(e){super(),_e(this,e,Tn,kn,fe,{layerData:0,removeImageFromLayer:1})}}function kt(t,e,n){const l=t.slice();return l[6]=e[n],l}function Tt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Et(t){let e,n=t[9]+"",l,r,s,i;function f(){return t[4](t[9])}return{c(){e=I("button"),l=N(n),e.disabled=r=t[2]===t[9]},m(c,a){D(c,e,a),y(e,l),s||(i=q(e,"click",f),s=!0)},p(c,a){t=c,a&4&&r!==(r=t[2]===t[9])&&(e.disabled=r)},d(c){c&&L(e),s=!1,i()}}}function Lt(t){let e,n,l,r,s,i=t[6]+"",f,c,a,h;function g(){return t[5](t[6])}return{c(){e=I("button"),n=I("img"),s=E(),f=N(i),c=E(),je(n.src,l=`./images/${t[2]}/${t[6]}.gif`)||k(n,"src",l),k(n,"alt",r=t[6])},m(u,o){D(u,e,o),y(e,n),y(e,s),y(e,f),y(e,c),a||(h=q(e,"click",g),a=!0)},p(u,o){t=u,o&4&&!je(n.src,l=`./images/${t[2]}/${t[6]}.gif`)&&k(n,"src",l),o&4&&r!==(r=t[6])&&k(n,"alt",r),o&4&&i!==(i=t[6]+"")&&J(f,i)},d(u){u&&L(e),a=!1,h()}}}function Ln(t){let e,n,l,r,s,i,f,c,a=Object.keys(t[3]),h=[];for(let o=0;o<a.length;o+=1)h[o]=Et(Tt(t,a,o));let g=Object.keys(t[3][t[2]]),u=[];for(let o=0;o<g.length;o+=1)u[o]=Lt(kt(t,g,o));return{c(){e=I("div"),n=I("div"),l=I("p"),l.textContent="Categories of available images:",r=E();for(let o=0;o<h.length;o+=1)h[o].c();s=E(),i=I("div"),f=I("p"),f.textContent="Add an image:",c=E();for(let o=0;o<u.length;o+=1)u[o].c();k(n,"class","block sequence"),k(i,"class","block sequence"),k(e,"class","container grid")},m(o,m){D(o,e,m),y(e,n),y(n,l),y(n,r);for(let d=0;d<h.length;d+=1)h[d].m(n,null);y(e,s),y(e,i),y(i,f),y(i,c);for(let d=0;d<u.length;d+=1)u[d].m(i,null)},p(o,[m]){if(m&12){a=Object.keys(o[3]);let d;for(d=0;d<a.length;d+=1){const b=Tt(o,a,d);h[d]?h[d].p(b,m):(h[d]=Et(b),h[d].c(),h[d].m(n,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=a.length}if(m&15){g=Object.keys(o[3][o[2]]);let d;for(d=0;d<g.length;d+=1){const b=kt(o,g,d);u[d]?u[d].p(b,m):(u[d]=Lt(b),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=g.length}},i:w,o:w,d(o){o&&L(e),me(h,o),me(u,o)}}}function Hn(t,e,n){let{layerData:l}=e,{addImageToLayer:r}=e;const s=l.layer.conf.DEFINITIONS;let i=Object.keys(s)[0];l.images.length>0&&(i=l.images[l.images.length-1].category);const f=a=>{n(2,i=a)},c=a=>{r(l.layer,i,a)};return t.$$set=a=>{"layerData"in a&&n(0,l=a.layerData),"addImageToLayer"in a&&n(1,r=a.addImageToLayer)},[l,r,i,s,f,c]}class Dn extends Ie{constructor(e){super(),_e(this,e,Hn,Ln,fe,{layerData:0,addImageToLayer:1})}}function On(t){let e;return{c(){e=N("Expand")},m(n,l){D(n,e,l)},d(n){n&&L(e)}}}function Gn(t){let e;return{c(){e=N("Collapse")},m(n,l){D(n,e,l)},d(n){n&&L(e)}}}function Ht(t){let e,n,l=t[3].layer.category+"",r,s,i=t[3].layer.item+"",f,c,a,h=t[3].images.length+"",g,u;return{c(){e=I("p"),n=I("strong"),r=N(l),s=E(),f=N(i),c=E(),a=I("p"),g=N(h),u=N(" image(s)")},m(o,m){D(o,e,m),y(e,n),y(n,r),y(n,s),y(n,f),D(o,c,m),D(o,a,m),y(a,g),y(a,u)},p(o,m){m&8&&l!==(l=o[3].layer.category+"")&&J(r,l),m&8&&i!==(i=o[3].layer.item+"")&&J(f,i),m&8&&h!==(h=o[3].images.length+"")&&J(g,h)},d(o){o&&L(e),o&&L(c),o&&L(a)}}}function Cn(t){let e,n,l,r,s=t[3].id+1+"",i,f,c,a,h,g,u,o,m,d,b,T,G,p,Q,te,H,j,A,S,ne,tt,le,nt,re,lt,se,Y,ze,rt;function st(v,C){return v[11]?Gn:On}let Ce=st(t),V=Ce(t),P=!t[11]&&Ht(t);return ne=new bn({props:{layerClasses:t[2],layerData:t[3],replaceLayer:t[4]}}),le=new wn({props:{effects:t[1],layerData:t[3],addEffect:t[9],removeEffect:t[10]}}),re=new En({props:{layerData:t[3],removeImageFromLayer:t[8]}}),se=new Dn({props:{layerData:t[3],addImageToLayer:t[7]}}),{c(){e=I("div"),n=I("div"),l=I("h2"),r=N("Layer "),i=N(s),f=E(),c=I("div"),a=I("button"),h=N("▲"),u=E(),o=I("div"),m=I("button"),d=N("▼"),T=E(),G=I("div"),p=I("button"),p.textContent="✕",Q=E(),te=I("div"),H=I("button"),V.c(),j=E(),P&&P.c(),A=E(),S=I("div"),we(ne.$$.fragment),tt=E(),we(le.$$.fragment),nt=E(),we(re.$$.fragment),lt=E(),we(se.$$.fragment),a.disabled=g=t[3].id===t[0]-1,m.disabled=b=t[3].id===0,k(n,"class","header container svelte-1op7pzl"),k(S,"class","controls container svelte-1op7pzl"),ot(S,"hidden",!t[11]),k(e,"class","layer container svelte-1op7pzl")},m(v,C){D(v,e,C),y(e,n),y(n,l),y(l,r),y(l,i),y(n,f),y(n,c),y(c,a),y(a,h),y(n,u),y(n,o),y(o,m),y(m,d),y(n,T),y(n,G),y(G,p),y(n,Q),y(n,te),y(te,H),V.m(H,null),y(n,j),P&&P.m(n,null),y(e,A),y(e,S),he(ne,S,null),y(S,tt),he(le,S,null),y(S,nt),he(re,S,null),y(S,lt),he(se,S,null),Y=!0,ze||(rt=[q(a,"click",t[12]),q(m,"click",t[13]),q(p,"click",t[14]),q(H,"click",t[15])],ze=!0)},p(v,[C]){(!Y||C&8)&&s!==(s=v[3].id+1+"")&&J(i,s),(!Y||C&9&&g!==(g=v[3].id===v[0]-1))&&(a.disabled=g),(!Y||C&8&&b!==(b=v[3].id===0))&&(m.disabled=b),Ce!==(Ce=st(v))&&(V.d(1),V=Ce(v),V&&(V.c(),V.m(H,null))),v[11]?P&&(P.d(1),P=null):P?P.p(v,C):(P=Ht(v),P.c(),P.m(n,null));const Me={};C&4&&(Me.layerClasses=v[2]),C&8&&(Me.layerData=v[3]),C&16&&(Me.replaceLayer=v[4]),ne.$set(Me);const ve={};C&2&&(ve.effects=v[1]),C&8&&(ve.layerData=v[3]),C&512&&(ve.addEffect=v[9]),C&1024&&(ve.removeEffect=v[10]),le.$set(ve);const Be={};C&8&&(Be.layerData=v[3]),C&256&&(Be.removeImageFromLayer=v[8]),re.$set(Be);const Re={};C&8&&(Re.layerData=v[3]),C&128&&(Re.addImageToLayer=v[7]),se.$set(Re),(!Y||C&2048)&&ot(S,"hidden",!v[11])},i(v){Y||(R(ne.$$.fragment,v),R(le.$$.fragment,v),R(re.$$.fragment,v),R(se.$$.fragment,v),Y=!0)},o(v){Z(ne.$$.fragment,v),Z(le.$$.fragment,v),Z(re.$$.fragment,v),Z(se.$$.fragment,v),Y=!1},d(v){v&&L(e),V.d(),P&&P.d(),de(ne),de(le),de(re),de(se),ze=!1,ye(rt)}}}function Mn(t,e,n){let{layersCount:l}=e,{effects:r}=e,{layerClasses:s}=e,{layerData:i}=e,{replaceLayer:f}=e,{moveLayer:c}=e,{removeLayer:a}=e,{addImageToLayer:h}=e,{removeImageFromLayer:g}=e,{addEffect:u}=e,{removeEffect:o}=e,m=!0;const d=()=>{c(i.layer,!0)},b=()=>{c(i.layer,!1)},T=()=>{a(i.layer)},G=()=>{n(11,m=!m)};return t.$$set=p=>{"layersCount"in p&&n(0,l=p.layersCount),"effects"in p&&n(1,r=p.effects),"layerClasses"in p&&n(2,s=p.layerClasses),"layerData"in p&&n(3,i=p.layerData),"replaceLayer"in p&&n(4,f=p.replaceLayer),"moveLayer"in p&&n(5,c=p.moveLayer),"removeLayer"in p&&n(6,a=p.removeLayer),"addImageToLayer"in p&&n(7,h=p.addImageToLayer),"removeImageFromLayer"in p&&n(8,g=p.removeImageFromLayer),"addEffect"in p&&n(9,u=p.addEffect),"removeEffect"in p&&n(10,o=p.removeEffect)},[l,r,s,i,f,c,a,h,g,u,o,m,d,b,T,G]}class Fn extends Ie{constructor(e){super(),_e(this,e,Mn,Cn,fe,{layersCount:0,effects:1,layerClasses:2,layerData:3,replaceLayer:4,moveLayer:5,removeLayer:6,addImageToLayer:7,removeImageFromLayer:8,addEffect:9,removeEffect:10})}}function Dt(t,e,n){const l=t.slice();return l[14]=e[n],l}function Nn(t){return{c:w,m:w,p:w,d:w}}function Sn(t){let e,n,l,r,s=t[0].length+"",i,f,c,a,h,g,u;return{c(){e=I("canvas"),n=E(),l=I("div"),r=I("p"),i=N(s),f=N(" layer(s)"),c=E(),a=I("div"),h=I("button"),h.textContent="Generate GIF",k(e,"id","generate"),k(e,"class","hidden"),k(e,"width",ee.WIDTH),k(e,"height",ee.HEIGHT),k(h,"class","svelte-x8w6v6")},m(o,m){D(o,e,m),D(o,n,m),D(o,l,m),y(l,r),y(r,i),y(r,f),D(o,c,m),D(o,a,m),y(a,h),g||(u=q(h,"click",t[1].generateGif.bind(t[1])),g=!0)},p(o,m){m&1&&s!==(s=o[0].length+"")&&J(i,s)},d(o){o&&L(e),o&&L(n),o&&L(l),o&&L(c),o&&L(a),g=!1,u()}}}function Wn(t){return{c:w,m:w,p:w,d:w}}function Pn(t){return{c:w,m:w,p:w,i:w,o:w,d:w}}function jn(t){let e,n=[],l=new Map,r,s,i,f,c,a,h=t[0];const g=u=>u[14].layer;for(let u=0;u<h.length;u+=1){let o=Dt(t,h,u),m=g(o);l.set(m,n[u]=Ot(m,o))}return{c(){e=I("div");for(let u=0;u<n.length;u+=1)n[u].c();r=E(),s=I("div"),i=I("button"),i.textContent="Add a layer",k(s,"class","block"),k(e,"class","content container svelte-x8w6v6")},m(u,o){D(u,e,o);for(let m=0;m<n.length;m+=1)n[m].m(e,null);y(e,r),y(e,s),y(s,i),f=!0,c||(a=q(i,"click",t[2]),c=!0)},p(u,o){o&1017&&(h=u[0],Mt(),n=Jt(n,o,g,1,u,h,l,e,Zt,Ot,r,Dt),Ft())},i(u){if(!f){for(let o=0;o<h.length;o+=1)R(n[o]);f=!0}},o(u){for(let o=0;o<n.length;o+=1)Z(n[o]);f=!1},d(u){u&&L(e);for(let o=0;o<n.length;o+=1)n[o].d();c=!1,a()}}}function Ot(t,e){let n,l,r;return l=new Fn({props:{layersCount:e[0].length,effects:Nt,layerClasses:x,layerData:e[14],replaceLayer:e[3],moveLayer:e[4],removeLayer:e[5],addImageToLayer:e[6],removeImageFromLayer:e[7],addEffect:e[8],removeEffect:e[9]}}),{key:t,first:null,c(){n=I("div"),we(l.$$.fragment),k(n,"class","block"),this.first=n},m(s,i){D(s,n,i),he(l,n,null),r=!0},p(s,i){e=s;const f={};i&1&&(f.layersCount=e[0].length),i&1&&(f.layerData=e[14]),l.$set(f)},i(s){r||(R(l.$$.fragment,s),r=!0)},o(s){Z(l.$$.fragment,s),r=!1},d(s){s&&L(n),de(l)}}}function An(t){return{c:w,m:w,p:w,i:w,o:w,d:w}}function qn(t){let e,n,l,r,s,i,f,c,a,h,g={ctx:t,current:null,token:null,hasCatch:!1,pending:Wn,then:Sn,catch:Nn,value:13};ut(t[10],g);let u={ctx:t,current:null,token:null,hasCatch:!1,pending:An,then:jn,catch:Pn,value:13,blocks:[,,,]};return ut(t[10],u),{c(){e=I("main"),n=I("div"),l=I("div"),l.innerHTML=`<div><h2>The</h2></div> 
            <div><img class="ogx3 svelte-x8w6v6" src="./ogx3.svg" alt="OGx3"/></div> 
            <div><h1>Odoo GIF</h1></div> 
            <div><p>open-source generator</p></div>`,r=E(),s=I("div"),i=I("div"),f=I("canvas"),c=E(),g.block.c(),a=E(),u.block.c(),k(l,"class","title svelte-x8w6v6"),k(f,"id","preview"),k(f,"width",ee.WIDTH),k(f,"height",ee.HEIGHT),k(s,"class","gifs container svelte-x8w6v6"),k(n,"class","sidebar container svelte-x8w6v6"),k(e,"class","svelte-x8w6v6")},m(o,m){D(o,e,m),y(e,n),y(n,l),y(n,r),y(n,s),y(s,i),y(i,f),y(s,c),g.block.m(s,g.anchor=null),g.mount=()=>s,g.anchor=null,y(e,a),u.block.m(e,u.anchor=null),u.mount=()=>e,u.anchor=null,h=!0},p(o,[m]){t=o,ht(g,t,m),ht(u,t,m)},i(o){h||(R(u.block),h=!0)},o(o){for(let m=0;m<3;m+=1){const d=u.blocks[m];Z(d)}h=!1},d(o){o&&L(e),g.block.d(),g.token=null,g=null,u.block.d(),u.token=null,u=null}}}function zn(t,e,n){let l;zt(t,dt,b=>n(0,l=b));const r=new yn(ee),s=()=>{dt.update(b=>r.layers.map((T,G)=>{const p=Object.fromEntries(Object.entries(Nt).map(Q=>[Q[0],T.effects.includes(Q[1])]));return{layer:T,id:G,images:T.images,effects:p}}))},i=()=>{const b=Ae(x),T=Ae(x[b]);r.addLayer(x[b][T],null).then(s)},f=(b,T,G)=>{r.addLayer(x[b][T],G).then(s)},c=(b,T)=>{r.moveLayer(b,T),s()},a=b=>{r.removeLayer(b),s()},h=(b,T,G)=>{r.loadImage(T,G,".png").then(()=>{b.addImage(r.getImage(T,G)),s()}).catch(()=>{})},g=(b,T)=>{b.removeImage(T),s()},u=(b,T)=>{b.addEffect(T),s()},o=(b,T)=>{b.removeEffect(T),s()},m=new Promise((b,T)=>{document.readyState==="loading"?document.addEventListener("load",b):b()}),d=Promise.all([m,r.init()]).then(i);return[l,r,i,f,c,a,h,g,u,o,d]}class Bn extends Ie{constructor(e){super(),_e(this,e,zn,qn,fe,{})}}new Bn({target:document.getElementById("app")});
