var rt=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var _=(r,e,t)=>(rt(r,e,"read from private field"),t?t.call(r):e.get(r)),j=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},P=(r,e,t,n)=>(rt(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var U=(r,e,t)=>(rt(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function G(){}function tr(r){return r()}function Et(){return Object.create(null)}function ve(r){r.forEach(tr)}function rr(r){return typeof r=="function"}function we(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let Re;function Ze(r,e){return Re||(Re=document.createElement("a")),Re.href=e,r===Re.href}function gr(r){return Object.keys(r).length===0}function ke(r,...e){if(r==null)return G;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function mr(r,e,t){r.$$.on_destroy.push(ke(e,t))}function m(r,e){r.appendChild(e)}function T(r,e,t){r.insertBefore(e,t||null)}function M(r){r.parentNode&&r.parentNode.removeChild(r)}function _e(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function b(r){return document.createElement(r)}function $(r){return document.createTextNode(r)}function L(){return $(" ")}function H(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function S(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function pr(r){return Array.from(r.childNodes)}function Z(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Ct(r,e,t){r.classList[t?"add":"remove"](e)}let Pe;function Me(r){Pe=r}function yr(){if(!Pe)throw new Error("Function called outside component initialization");return Pe}function br(r){yr().$$.on_mount.push(r)}const Le=[],Mt=[],Ve=[],Tt=[],_r=Promise.resolve();let at=!1;function vr(){at||(at=!0,_r.then(nr))}function ct(r){Ve.push(r)}const nt=new Set;let ze=0;function nr(){const r=Pe;do{for(;ze<Le.length;){const e=Le[ze];ze++,Me(e),wr(e.$$)}for(Me(null),Le.length=0,ze=0;Mt.length;)Mt.pop()();for(let e=0;e<Ve.length;e+=1){const t=Ve[e];nt.has(t)||(nt.add(t),t())}Ve.length=0}while(Le.length);for(;Tt.length;)Tt.pop()();at=!1,nt.clear(),Me(r)}function wr(r){if(r.fragment!==null){r.update(),ve(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(ct)}}const We=new Set;let ce;function ir(){ce={r:0,c:[],p:ce}}function sr(){ce.r||ve(ce.c),ce=ce.p}function K(r,e){r&&r.i&&(We.delete(r),r.i(e))}function x(r,e,t,n){if(r&&r.o){if(We.has(r))return;We.add(r),ce.c.push(()=>{We.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function kr(r,e){x(r,1,1,()=>{e.delete(r.key)})}function Sr(r,e,t,n,i,s,o,c,l,u,d,g){let f=r.length,a=s.length,p=f;const h={};for(;p--;)h[r[p].key]=p;const y=[],I=new Map,E=new Map;for(p=a;p--;){const O=g(i,s,p),R=t(O);let z=o.get(R);z?n&&z.p(O,e):(z=u(R,O),z.c()),I.set(R,y[p]=z),R in h&&E.set(R,Math.abs(p-h[R]))}const C=new Set,v=new Set;function w(O){K(O,1),O.m(c,d),o.set(O.key,O),d=O.first,a--}for(;f&&a;){const O=y[a-1],R=r[f-1],z=O.key,A=R.key;O===R?(d=O.first,f--,a--):I.has(A)?!o.has(z)||C.has(z)?w(O):v.has(A)?f--:E.get(z)>E.get(A)?(v.add(z),w(O)):(C.add(A),f--):(l(R,o),f--)}for(;f--;){const O=r[f];I.has(O.key)||l(O,o)}for(;a;)w(y[a-1]);return y}function Ee(r){r&&r.c()}function he(r,e,t,n){const{fragment:i,after_update:s}=r.$$;i&&i.m(e,t),n||ct(()=>{const o=r.$$.on_mount.map(tr).filter(rr);r.$$.on_destroy?r.$$.on_destroy.push(...o):ve(o),r.$$.on_mount=[]}),s.forEach(ct)}function de(r,e){const t=r.$$;t.fragment!==null&&(ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Or(r,e){r.$$.dirty[0]===-1&&(Le.push(r),vr(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Se(r,e,t,n,i,s,o,c=[-1]){const l=Pe;Me(r);const u=r.$$={fragment:null,ctx:[],props:s,update:G,not_equal:i,bound:Et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Et(),dirty:c,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let d=!1;if(u.ctx=t?t(r,e.props||{},(g,f,...a)=>{const p=a.length?a[0]:f;return u.ctx&&i(u.ctx[g],u.ctx[g]=p)&&(!u.skip_bound&&u.bound[g]&&u.bound[g](p),d&&Or(r,g)),f}):[],u.update(),d=!0,ve(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const g=pr(e.target);u.fragment&&u.fragment.l(g),g.forEach(M)}else u.fragment&&u.fragment.c();e.intro&&K(r.$$.fragment),he(r,e.target,e.anchor,e.customElement),nr()}Me(l)}class Oe{$destroy(){de(this,1),this.$destroy=G}$on(e,t){if(!rr(t))return G;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!gr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const V={width:512,height:256,fps:25,framecount:100},it={nature:{galaxy:["-"]},"solid-colors":{black:["-"],"gray-dark":["-"],gray:["-"],"gray-light":["-"],white:["-"],"purple-dark":["-"],purple:["-"],"purple-light":["-"],"red-dark":["-"],red:["-"],"red-light":["-"],"orange-dark":["-"],orange:["-"],"orange-light":["-"],"yellow-dark":["-"],yellow:["-"],"yellow-light":["-"],"green-dark":["-"],green:["-"],"green-light":["-"],"teal-dark":["-"],teal:["-"],"teal-light":["-"],"blue-dark":["-"],blue:["-"],"blue-light":["-"],"violet-dark":["-"],violet:["-"],"violet-light":["-"]},text:{mastr:["-"],v15:["-"],v16:["-"],v17:["-"],bug:["-"],issue:["-"]}},W=(r,e)=>Math.pow(r+e/3,5)*123456789%1,Pt=(r,e)=>document.getElementById(r).getContext("2d",{alpha:!1,...e}),B=r=>({w:r.canvas.width,h:r.canvas.height}),st=(r,e)=>{r.filter==="none"?r.filter=e:r.filter=r.filter+" "+e},Ir={blurred:(r,e)=>{const{w:t,h:n}=B(r);st(r,`blur(${Math.ceil(t/32)}px)`)},inverted:(r,e)=>{st(r,"invert(1)")},saturated:(r,e)=>{st(r,"saturate(4)")},shaking:(r,e)=>{const{w:t,h:n}=B(r),i=Math.max(t,n)/30,s=Math.round(i*(W(e,0)-.5)),o=Math.round(i*(W(e,.1)-.5));r.translate(s,o),r.translate(t/2,n/2),r.scale(1+i/t,1+i/n),r.translate(-t/2,-n/2)},rotating:(r,e)=>{const{w:t,h:n}=B(r),i=1/15,s=(Math.abs(e%i-i/2)-i/4)*(2*Math.PI);r.translate(t/2,n/2),r.scale(1.5,1.5),r.rotate(s),r.translate(-t/2,-n/2)},spinning:(r,e)=>{const{w:t,h:n}=B(r),i=e*(2*Math.PI);r.translate(t/2,n/2),r.rotate(i),r.translate(-t/2,-n/2)},zooming:(r,e)=>{const{w:t,h:n}=B(r),i=1/4,s=e%i/i,o=.1;let c=1;s<o&&(c+=(o/2-Math.abs(s-o/2))*3.5),r.translate(t/2,n/2),r.scale(c,c),r.translate(-t/2,-n/2)}};var ut=function(r,e){return ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},ut(r,e)};function qe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ut(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ft(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function Ne(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function ee(r){return typeof r=="function"}function or(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ot=or(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function ht(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var Qe=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var c=ft(o),l=c.next();!l.done;l=c.next()){var u=l.value;u.remove(this)}}catch(h){e={error:h}}finally{try{l&&!l.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(ee(d))try{d()}catch(h){s=h instanceof ot?h.errors:[h]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var f=ft(g),a=f.next();!a.done;a=f.next()){var p=a.value;try{jt(p)}catch(h){s=s??[],h instanceof ot?s=Ne(Ne([],Je(s)),Je(h.errors)):s.push(h)}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}if(s)throw new ot(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)jt(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ht(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&ht(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}(),lr=Qe.EMPTY;function ar(r){return r instanceof Qe||r&&"closed"in r&&ee(r.remove)&&ee(r.add)&&ee(r.unsubscribe)}function jt(r){ee(r)?r():r.unsubscribe()}var bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},dt={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i=dt.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,Ne([r,e],Je(t))):setTimeout.apply(void 0,Ne([r,e],Je(t)))},clearTimeout:function(r){var e=dt.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(r)},delegate:void 0};function Lr(r){dt.setTimeout(function(){throw r})}function Gt(){}var He=null;function Ke(r){if(bt.useDeprecatedSynchronousErrorHandling){var e=!He;if(e&&(He={errorThrown:!1,error:null}),r(),e){var t=He,n=t.errorThrown,i=t.error;if(He=null,n)throw i}}else r()}var cr=function(r){qe(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,ar(t)&&t.add(n)):n.destination=Tr,n}return e.create=function(t,n,i){return new gt(t,n,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Qe),Er=Function.prototype.bind;function lt(r,e){return Er.call(r,e)}var Cr=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){Ye(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){Ye(n)}else Ye(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Ye(t)}},r}(),gt=function(r){qe(e,r);function e(t,n,i){var s=r.call(this)||this,o;if(ee(t)||!t)o={next:t??void 0,error:n??void 0,complete:i??void 0};else{var c;s&&bt.useDeprecatedNextContext?(c=Object.create(t),c.unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&lt(t.next,c),error:t.error&&lt(t.error,c),complete:t.complete&&lt(t.complete,c)}):o=t}return s.destination=new Cr(o),s}return e}(cr);function Ye(r){Lr(r)}function Mr(r){throw r}var Tr={closed:!0,next:Gt,error:Mr,complete:Gt},Pr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function jr(r){return r}function Gr(r){return r.length===0?jr:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}var $t=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this,s=Ar(e)?e:new gt(e,t,n);return Ke(function(){var o=i,c=o.operator,l=o.source;s.add(c?c.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=At(t),new t(function(i,s){var o=new gt({next:function(c){try{e(c)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});n.subscribe(o)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[Pr]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Gr(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=At(e),new e(function(n,i){var s;t.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();function At(r){var e;return(e=r??bt.Promise)!==null&&e!==void 0?e:Promise}function $r(r){return r&&ee(r.next)&&ee(r.error)&&ee(r.complete)}function Ar(r){return r&&r instanceof cr||$r(r)&&ar(r)}var Fr=or(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ur=function(r){qe(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new Ft(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new Fr},e.prototype.next=function(t){var n=this;Ke(function(){var i,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=ft(n.currentObservers),c=o.next();!c.done;c=o.next()){var l=c.value;l.next(t)}}catch(u){i={error:u}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var n=this;Ke(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;Ke(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,i=this,s=i.hasError,o=i.isStopped,c=i.observers;return s||o?lr:(this.currentObservers=null,c.push(t),new Qe(function(){n.currentObservers=null,ht(c,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,s=n.thrownError,o=n.isStopped;i?t.error(s):o&&t.complete()},e.prototype.asObservable=function(){var t=new $t;return t.source=this,t},e.create=function(t,n){return new Ft(t,n)},e}($t),Ft=function(r){qe(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)},e.prototype.error=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:lr},e}(ur),fr=function(r){qe(e,r);function e(t){var n=r.call(this)||this;return n._value=t,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var n=r.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},e.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,s=t._value;if(n)throw i;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(ur),J,X,ge,je,mt,ue,Ce;class Be{constructor(){j(this,je);j(this,ue);j(this,J,void 0);j(this,X,void 0);j(this,ge,void 0);P(this,J,[]),P(this,X,[]),P(this,ge,new fr(U(this,je,mt).call(this)))}get category(){return null}get item(){return null}get effects(){return[..._(this,J)]}get images(){return[..._(this,X)]}get observable(){return _(this,ge).asObservable()}getElems(e){return _(this,X).map(t=>t.getElem(e))}addEffect(e){_(this,J).push(e),U(this,ue,Ce).call(this)}removeEffect(e){P(this,J,_(this,J).filter(t=>t!==e)),U(this,ue,Ce).call(this)}addImage(e){_(this,X).push(e),U(this,ue,Ce).call(this)}removeImage(e){_(this,X).splice(e,1),U(this,ue,Ce).call(this)}draw(e,t){}drawImage(e,t,n,i,s,o,c,l){e.save(),e.translate(i,s),e.rotate(l),e.drawImage(_(this,X)[n].getElem(t),-o/2,-c/2,o,c),e.restore()}paint(e,t){if(_(this,X).length>0){e.save();for(const n of _(this,J))n(e,t);this.draw(e,t),e.restore()}}}J=new WeakMap,X=new WeakMap,ge=new WeakMap,je=new WeakSet,mt=function(){return{effects:this.effects,images:this.images}},ue=new WeakSet,Ce=function(){_(this,ge).next(U(this,je,mt).call(this))};class _t extends Be{get category(){return"full-frame"}}class qr extends _t{get item(){return"static"}draw(e,t){const{w:n,h:i}=B(e);for(let s=0;s<this.images.length;s++)this.drawImage(e,t,s,n/2,i/2,n,i,0)}}class Br extends _t{get item(){return"zoom"}draw(e,t){const{w:n,h:i}=B(e);for(let s=0;s<this.images.length;s++)this.drawImage(e,t,s,n/2,i/2,n*1.5,i*1.5,0)}}class Dr extends _t{get item(){return"blink"}draw(e,t){const{w:n,h:i}=B(e),s=Math.floor(t*this.images.length);this.drawImage(e,t,s,n/2,i/2,n,i,0)}}class Ie extends Be{get category(){return"mini"}drawMini(e,t,n,i){const{w:s,h:o}=B(e);for(let c=0;c<this.images.length;c++)this.drawImage(e,t,c,n*s/2+s/4,i*o/2+o/4,s/2,o/2,0)}}class Ur extends Ie{get item(){return"center"}draw(e,t){this.drawMini(e,t,.5,.5)}}class Rr extends Ie{get item(){return"bottom"}draw(e,t){this.drawMini(e,t,.5,1)}}class zr extends Ie{get item(){return"top-left"}draw(e,t){this.drawMini(e,t,0,0)}}class Hr extends Ie{get item(){return"top-right"}draw(e,t){this.drawMini(e,t,1,0)}}class Yr extends Ie{get item(){return"bottom-right"}draw(e,t){this.drawMini(e,t,1,1)}}class Vr extends Ie{get item(){return"bottom-left"}draw(e,t){this.drawMini(e,t,0,1)}}class vt extends Be{get category(){return"strip"}getLengths(e,t){const{w:n,h:i}=B(e),s=Math.min(n/t,i),o=s*n/i,c=s,l=(n-s*t)/2+s/2,u=i/2;return{x:l,y:u,width:o,height:c}}}class Wr extends vt{get item(){return"static"}draw(e,t){const{x:n,y:i,width:s,height:o}=this.getLengths(e,this.images.length);for(let c=0;c<this.images.length;c++)this.drawImage(e,t,c,n+c*o,i,s,o,0)}}class Kr extends vt{get item(){return"window"}draw(e,t){const n=.3333333333333333,i=t%n/n,s=this.images.length,o=Math.min(s<4?1:s<6?2:3,s),c=Math.floor(s*i),l=c+o,{x:u,y:d,width:g,height:f}=this.getLengths(e,s);for(let a=0;a<s;a++)(a>=c&&a<l||l>s&&a<l%s)&&this.drawImage(e,t,a,u+a*f,d,g,f,0)}}class Xr extends vt{get item(){return"slide"}draw(e,t){const{w:n,h:i}=B(e),{x:s,y:o,width:c,height:l}=this.getLengths(e,this.images.length);for(let u=0;u<3;u++)for(let d=0;d<this.images.length;d++){const g=s+l*(d-.5)+n*(u-t);this.drawImage(e,t,d,g,o,c,l,0)}}}class hr extends Be{get category(){return"counter"}getRepetitions(e){return Math.max(2,6-e)}getNewT(e,t){return e*t%1}}class Zr extends hr{get item(){return"increase"}draw(e,t){const{w:n,h:i}=B(e),s=n/4,o=i/4,c=this.getRepetitions(this.images.length);for(let l=0;l<3;l++){const u=l*s+s/2,d=this.getNewT(t,Math.pow(4,l));for(let g=0;g<c;g++){const f=(g-d)*o*this.images.length;for(let a=0;a<this.images.length;a++){const p=o*a+f+o/2;this.drawImage(e,t,a,u,p,s,o,0)}}}}}class Jr extends hr{get item(){return"slot-machine"}draw(e,t){const{w:n,h:i}=B(e),s=n/4,o=i/4,c=1+this.getRepetitions(this.images.length);for(let l=0;l<3;l++){const d=2*[5,7,4][l]-1,g=t<.15?1+(d-1)*t/.15:d-(d-1)*(t-.15)/(1-.15),f=t<.15?t*(1+(g-1)/2):.15*(1+(d-1)/2)+(t-.15)*(g+(d-g)/2),a=this.getNewT(f,Math.max(1,3-Math.floor(this.images.length/2))),p=l*s+s/2;for(let h=0;h<c;h++){const y=h-c+(this.images.length<3?4:2);for(let I=0;I<this.images.length;I++){const E=o*(I+1.5+this.images.length*(y-a))+o/2;this.drawImage(e,t,I,p,E,s,o,0)}}}}}class dr extends Be{get category(){return"particle"}calculateCoords(e,t,n,i,s,o){const c=e+s*n,l=i-s*o;let u=t;return l>=0?u-=s*(l+(i-l)/2):i>=0?u-=i*i/o/2+(s-i/o)*l/2:u-=s*(i-(i-l)/2),{x:c,y:u}}}class Nr extends dr{get item(){return"explosion"}draw(e,t){const{w:n,h:i}=B(e),s=.25,o=n*s,c=i*s,l=.7,u=Math.ceil(400/this.images.length);for(let d=0;d<u;d++)for(let g=0;g<this.images.length;g++){e.save();let f=n/2,a=i*3/4,p=0;if(t>=l){const h=(d+g/this.images.length)/u,y=2*Math.PI*(.5*W(h,0)+(W(h,.1)<.7?0:.5)),I=1+4*W(h,.2),E=Math.cos(y)*I,C=Math.sin(y)*I,v=(t-l)/(1-l),w=this.calculateCoords(f/n,a/i,E,C,v,1.8);f=w.x*n,a=w.y*i,p+=2*Math.PI*v*1.2*(W(h,.3)-.5)}this.drawImage(e,t,g,f,a,o,c,p),e.restore()}}}class Qr extends dr{get item(){return"confetti"}draw(e,t){const{w:n,h:i}=B(e),s=.25,o=n*s,c=i*s,l=Math.ceil(400/this.images.length);for(let u=0;u<l;u++)for(let d=0;d<this.images.length;d++){e.save();const g=(u+d/this.images.length)/l;let f=n*(.4+.2*W(g,0)),a=i*(1+5*W(g,.1)),p=0;const h=7*(W(g,.2)-.5),y=25+10*W(g,.3),I=this.calculateCoords(f/n,a/i,h,y,t,80);f=I.x*n,a=I.y*i,p+=2*Math.PI*t*3*(W(g,.4)-.5),this.drawImage(e,t,d,f,a,o,c,p),e.restore()}}}const xr=[qr,Br,Dr,Ur,Rr,zr,Hr,Yr,Vr,Wr,Kr,Xr,Zr,Jr,Nr,Qr],Te={};for(const r of xr){const e=new r;e.category in Te||(Te[e.category]={}),Te[e.category][e.item]=r}var me,pe,ne,Ge,fe,Y,N,$e,pt;class en{constructor(e,t,n,i){j(this,$e);j(this,me,void 0);j(this,pe,void 0);j(this,ne,void 0);j(this,Ge,void 0);j(this,fe,void 0);j(this,Y,void 0);j(this,N,void 0);P(this,me,e),P(this,pe,t),P(this,ne,n),P(this,Ge,i),P(this,fe,{}),P(this,Y,"pending"),P(this,N,Promise.resolve())}get category(){return _(this,me)}get item(){return _(this,pe)}get state(){return _(this,Y)}get promise(){return _(this,N)}getElem(e){if(_(this,Y)!=="ready")return null;const t=_(this,ne)[_(this,ne).length-1],n=e%U(this,$e,pt).call(this,t);for(const i of _(this,ne))if(n<U(this,$e,pt).call(this,i))return _(this,fe)[i]}load(){return _(this,Y)!=="pending"&&_(this,Y)!=="errored"?_(this,N):(P(this,Y,"loading"),P(this,N,_(this,N).then(()=>Promise.allSettled(_(this,ne).map(e=>new Promise((t,n)=>{const i=new Image;_(this,fe)[e]=i,i.onload=t,i.onerror=n,i.src=`./images/${_(this,me)}/${_(this,pe)}/${e}${_(this,Ge)}`}))).then(()=>{P(this,Y,"ready")}).catch(()=>(P(this,fe,{}),P(this,Y,"errored"),Promise.reject())))),_(this,N))}}me=new WeakMap,pe=new WeakMap,ne=new WeakMap,Ge=new WeakMap,fe=new WeakMap,Y=new WeakMap,N=new WeakMap,$e=new WeakSet,pt=function(e){return e==="-"?1:parseFloat("0."+e)};var Q,ie,Ae,F,ye,Fe,yt,be,Xe;class qt{constructor(e,t){j(this,Fe);j(this,be);j(this,Q,void 0);j(this,ie,void 0);j(this,Ae,void 0);j(this,F,void 0);j(this,ye,void 0);const i=e.canvas.width,s=e.canvas.height;if(i<256||s<256){let o=i,c=s;i<s?(o=256,c=Math.round(256*s/i)):(o=Math.round(256*i/s),c=256),P(this,Q,new OffscreenCanvas(o,c).getContext("2d"))}else P(this,Q,null);P(this,ie,e),P(this,Ae,t),P(this,F,[]),P(this,ye,new fr(U(this,Fe,yt).call(this)))}get layersData(){return[..._(this,F)]}get observable(){return _(this,ye).asObservable()}render(e){const t=_(this,Q)!==null?_(this,Q):_(this,ie);t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="#fff",t.fillRect(0,0,t.canvas.width,t.canvas.height);for(const n of _(this,F))n.layer.paint(t,e/_(this,Ae));_(this,Q)!==null&&_(this,ie).drawImage(_(this,Q).canvas,0,0,_(this,ie).canvas.width,_(this,ie).canvas.height)}addLayer(e,t){if(t===null){let n=1+Math.max(-1,..._(this,F).map(i=>i.id));_(this,F).push({id:n,layer:e})}else{const n=_(this,F).map(i=>i.layer).indexOf(t);_(this,F)[n].layer=e;for(const i of t.effects)e.addEffect(i);for(const i of t.images)e.addImage(i)}U(this,be,Xe).call(this)}removeLayer(e){P(this,F,_(this,F).filter(t=>t.layer!==e)),U(this,be,Xe).call(this)}moveLayer(e,t){const n=_(this,F).map(o=>o.layer).indexOf(e),i=n+(t?1:-1),s=_(this,F)[n];_(this,F)[n]=_(this,F)[i],_(this,F)[i]=s,U(this,be,Xe).call(this)}}Q=new WeakMap,ie=new WeakMap,Ae=new WeakMap,F=new WeakMap,ye=new WeakMap,Fe=new WeakSet,yt=function(){return this.layersData},be=new WeakSet,Xe=function(){_(this,ye).next(U(this,Fe,yt).call(this))};function Bt(r,e,t){const n=r.slice();return n[6]=e[t],n}function Dt(r,e,t){const n=r.slice();return n[9]=e[t],n}function Ut(r){let e,t=r[9]+"",n,i,s,o;function c(){return r[4](r[9])}return{c(){e=b("button"),n=$(t),e.disabled=i=r[3]===r[9]},m(l,u){T(l,e,u),m(e,n),s||(o=H(e,"click",c),s=!0)},p(l,u){r=l,u&4&&t!==(t=r[9]+"")&&Z(n,t),u&12&&i!==(i=r[3]===r[9])&&(e.disabled=i)},d(l){l&&M(e),s=!1,o()}}}function Rt(r){let e,t=r[6]+"",n,i,s,o;function c(){return r[5](r[6])}return{c(){e=b("button"),n=$(t),e.disabled=i=r[1].category===r[3]&&r[1].item===r[6]},m(l,u){T(l,e,u),m(e,n),s||(o=H(e,"click",c),s=!0)},p(l,u){r=l,u&12&&t!==(t=r[6]+"")&&Z(n,t),u&14&&i!==(i=r[1].category===r[3]&&r[1].item===r[6])&&(e.disabled=i)},d(l){l&&M(e),s=!1,o()}}}function tn(r){let e,t,n,i,s,o,c,l,u=Object.keys(r[2]),d=[];for(let a=0;a<u.length;a+=1)d[a]=Ut(Dt(r,u,a));let g=Object.keys(r[2][r[3]]),f=[];for(let a=0;a<g.length;a+=1)f[a]=Rt(Bt(r,g,a));return{c(){e=b("div"),t=b("div"),n=b("p"),n.textContent="Types of layers:",i=L();for(let a=0;a<d.length;a+=1)d[a].c();s=L(),o=b("div"),c=b("p"),c.textContent="Subtypes:",l=L();for(let a=0;a<f.length;a+=1)f[a].c();S(t,"class","block short sequence"),S(o,"class","block short sequence"),S(e,"class","container grid")},m(a,p){T(a,e,p),m(e,t),m(t,n),m(t,i);for(let h=0;h<d.length;h+=1)d[h].m(t,null);m(e,s),m(e,o),m(o,c),m(o,l);for(let h=0;h<f.length;h+=1)f[h].m(o,null)},p(a,[p]){if(p&12){u=Object.keys(a[2]);let h;for(h=0;h<u.length;h+=1){const y=Dt(a,u,h);d[h]?d[h].p(y,p):(d[h]=Ut(y),d[h].c(),d[h].m(t,null))}for(;h<d.length;h+=1)d[h].d(1);d.length=u.length}if(p&15){g=Object.keys(a[2][a[3]]);let h;for(h=0;h<g.length;h+=1){const y=Bt(a,g,h);f[h]?f[h].p(y,p):(f[h]=Rt(y),f[h].c(),f[h].m(o,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=g.length}},i:G,o:G,d(a){a&&M(e),_e(d,a),_e(f,a)}}}function rn(r,e,t){let{composition:n}=e,{layer:i}=e,{layerClasses:s}=e,o=i.category;const c=u=>{t(3,o=u)},l=u=>{n.addLayer(new s[o][u],i)};return r.$$set=u=>{"composition"in u&&t(0,n=u.composition),"layer"in u&&t(1,i=u.layer),"layerClasses"in u&&t(2,s=u.layerClasses)},[n,i,s,o,c,l]}class nn extends Oe{constructor(e){super(),Se(this,e,rn,tn,we,{composition:0,layer:1,layerClasses:2})}}function zt(r,e,t){const n=r.slice();return n[7]=e[t],n}function Ht(r){let e,t=(r[1].includes(r[0][r[7]])?"✓ "+r[7]:r[7])+"",n,i,s,o;function c(){return r[6](r[7])}return{c(){e=b("button"),n=$(t),i=L()},m(l,u){T(l,e,u),m(e,n),m(e,i),s||(o=H(e,"click",c),s=!0)},p(l,u){r=l,u&3&&t!==(t=(r[1].includes(r[0][r[7]])?"✓ "+r[7]:r[7])+"")&&Z(n,t)},d(l){l&&M(e),s=!1,o()}}}function sn(r){let e,t,n,i=Object.keys(r[0]),s=[];for(let o=0;o<i.length;o+=1)s[o]=Ht(zt(r,i,o));return{c(){e=b("div"),t=b("p"),t.textContent="Effects on this layer:",n=L();for(let o=0;o<s.length;o+=1)s[o].c();S(e,"class","block short sequence")},m(o,c){T(o,e,c),m(e,t),m(e,n);for(let l=0;l<s.length;l+=1)s[l].m(e,null)},p(o,[c]){if(c&11){i=Object.keys(o[0]);let l;for(l=0;l<i.length;l+=1){const u=zt(o,i,l);s[l]?s[l].p(u,c):(s[l]=Ht(u),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=i.length}},i:G,o:G,d(o){o&&M(e),_e(s,o)}}}function on(r,e,t){let n,i,s,o=G,c=()=>(o(),o=ke(n,f=>t(5,s=f)),n);r.$$.on_destroy.push(()=>o());let{layer:l}=e,{effects:u}=e;const d=f=>{const a=u[f];i.includes(a)?l.removeEffect(a):l.addEffect(a)},g=f=>{d(f)};return r.$$set=f=>{"layer"in f&&t(4,l=f.layer),"effects"in f&&t(0,u=f.effects)},r.$$.update=()=>{r.$$.dirty&16&&c(t(2,n=l.observable)),r.$$.dirty&32&&t(1,i=s.effects)},[u,i,n,d,l,s,g]}class ln extends Oe{constructor(e){super(),Se(this,e,on,sn,we,{layer:4,effects:0})}}function Yt(r,e,t){const n=r.slice();return n[4]=e[t],n[6]=t,n}function Vt(r){let e,t,n,i,s,o,c,l,u;function d(){return r[3](r[6])}return{c(){e=b("button"),t=b("img"),s=L(),o=b("p"),o.textContent="✕",c=L(),Ze(t.src,n=`./images/${r[4].category}/${r[4].item}.gif`)||S(t,"src",n),S(t,"alt",i=`${r[4].category} ${r[4].item}`)},m(g,f){T(g,e,f),m(e,t),m(e,s),m(e,o),m(e,c),l||(u=H(e,"click",d),l=!0)},p(g,f){r=g,f&4&&!Ze(t.src,n=`./images/${r[4].category}/${r[4].item}.gif`)&&S(t,"src",n),f&4&&i!==(i=`${r[4].category} ${r[4].item}`)&&S(t,"alt",i)},d(g){g&&M(e),l=!1,u()}}}function an(r){let e,t,n,i=r[2].images,s=[];for(let o=0;o<i.length;o+=1)s[o]=Vt(Yt(r,i,o));return{c(){e=b("div"),t=b("p"),t.textContent="Images in this layer:",n=L();for(let o=0;o<s.length;o+=1)s[o].c();S(e,"class","block short sequence")},m(o,c){T(o,e,c),m(e,t),m(e,n);for(let l=0;l<s.length;l+=1)s[l].m(e,null)},p(o,[c]){if(c&5){i=o[2].images;let l;for(l=0;l<i.length;l+=1){const u=Yt(o,i,l);s[l]?s[l].p(u,c):(s[l]=Vt(u),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=i.length}},i:G,o:G,d(o){o&&M(e),_e(s,o)}}}function cn(r,e,t){let n,i,s=G,o=()=>(s(),s=ke(n,u=>t(2,i=u)),n);r.$$.on_destroy.push(()=>s());let{layer:c}=e;const l=u=>{c.removeImage(u)};return r.$$set=u=>{"layer"in u&&t(0,c=u.layer)},r.$$.update=()=>{r.$$.dirty&1&&o(t(1,n=c.observable))},[c,n,i,l]}class un extends Oe{constructor(e){super(),Se(this,e,cn,an,we,{layer:0})}}function Wt(r,e,t){const n=r.slice();return n[8]=e[t],n}function Kt(r,e,t){const n=r.slice();return n[11]=e[t],n}function Xt(r){let e,t=r[11]+"",n,i,s,o;function c(){return r[5](r[11])}return{c(){e=b("button"),n=$(t),e.disabled=i=r[1]===r[11]},m(l,u){T(l,e,u),m(e,n),s||(o=H(e,"click",c),s=!0)},p(l,u){r=l,u&1&&t!==(t=r[11]+"")&&Z(n,t),u&3&&i!==(i=r[1]===r[11])&&(e.disabled=i)},d(l){l&&M(e),s=!1,o()}}}function Zt(r){let e,t,n,i,s,o=r[8]+"",c,l,u,d;function g(){return r[6](r[8])}return{c(){e=b("button"),t=b("img"),s=L(),c=$(o),l=L(),Ze(t.src,n=`./images/${r[1]}/${r[8]}.gif`)||S(t,"src",n),S(t,"alt",i=r[8])},m(f,a){T(f,e,a),m(e,t),m(e,s),m(e,c),m(e,l),u||(d=H(e,"click",g),u=!0)},p(f,a){r=f,a&3&&!Ze(t.src,n=`./images/${r[1]}/${r[8]}.gif`)&&S(t,"src",n),a&3&&i!==(i=r[8])&&S(t,"alt",i),a&3&&o!==(o=r[8]+"")&&Z(c,o)},d(f){f&&M(e),u=!1,d()}}}function fn(r){let e,t,n,i,s,o,c,l,u=Object.keys(r[0]),d=[];for(let a=0;a<u.length;a+=1)d[a]=Xt(Kt(r,u,a));let g=Object.keys(r[0][r[1]]),f=[];for(let a=0;a<g.length;a+=1)f[a]=Zt(Wt(r,g,a));return{c(){e=b("div"),t=b("div"),n=b("p"),n.textContent="Categories of available images:",i=L();for(let a=0;a<d.length;a+=1)d[a].c();s=L(),o=b("div"),c=b("p"),c.textContent="Add an image:",l=L();for(let a=0;a<f.length;a+=1)f[a].c();S(t,"class","block short sequence"),S(o,"class","block short sequence"),S(e,"class","container grid")},m(a,p){T(a,e,p),m(e,t),m(t,n),m(t,i);for(let h=0;h<d.length;h+=1)d[h].m(t,null);m(e,s),m(e,o),m(o,c),m(o,l);for(let h=0;h<f.length;h+=1)f[h].m(o,null)},p(a,[p]){if(p&3){u=Object.keys(a[0]);let h;for(h=0;h<u.length;h+=1){const y=Kt(a,u,h);d[h]?d[h].p(y,p):(d[h]=Xt(y),d[h].c(),d[h].m(t,null))}for(;h<d.length;h+=1)d[h].d(1);d.length=u.length}if(p&11){g=Object.keys(a[0][a[1]]);let h;for(h=0;h<g.length;h+=1){const y=Wt(a,g,h);f[h]?f[h].p(y,p):(f[h]=Zt(y),f[h].c(),f[h].m(o,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=g.length}},i:G,o:G,d(a){a&&M(e),_e(d,a),_e(f,a)}}}function hn(r,e,t){let n,i,s=G,o=()=>(s(),s=ke(n,a=>t(7,i=a)),n);r.$$.on_destroy.push(()=>s());let{layer:c}=e,{images:l}=e,u=Object.keys(l)[0];i&&i.images.length>0&&(u=i.images[i.images.length-1].category);const d=a=>{const p=l[u][a];p.load().then(()=>{c.addImage(p)}).catch(()=>{})},g=a=>{t(1,u=a)},f=a=>{d(a)};return r.$$set=a=>{"layer"in a&&t(4,c=a.layer),"images"in a&&t(0,l=a.images)},r.$$.update=()=>{r.$$.dirty&16&&o(t(2,n=c.observable))},[l,u,n,d,c,g,f]}class dn extends Oe{constructor(e){super(),Se(this,e,hn,fn,we,{layer:4,images:0})}}function gn(r){let e;return{c(){e=$("Expand")},m(t,n){T(t,e,n)},d(t){t&&M(e)}}}function mn(r){let e;return{c(){e=$("Collapse")},m(t,n){T(t,e,n)},d(t){t&&M(e)}}}function Jt(r){let e,t,n=r[2].category+"",i,s,o=r[2].item+"",c,l,u,d=r[9].images.length+"",g,f;return{c(){e=b("p"),t=b("strong"),i=$(n),s=L(),c=$(o),l=L(),u=b("p"),g=$(d),f=$(" image(s)")},m(a,p){T(a,e,p),m(e,t),m(t,i),m(t,s),m(t,c),T(a,l,p),T(a,u,p),m(u,g),m(u,f)},p(a,p){p&4&&n!==(n=a[2].category+"")&&Z(i,n),p&4&&o!==(o=a[2].item+"")&&Z(c,o),p&512&&d!==(d=a[9].images.length+"")&&Z(g,d)},d(a){a&&M(e),a&&M(l),a&&M(u)}}}function pn(r){let e,t,n,i,s=r[1]+1+"",o,c,l,u,d,g,f,a,p,h,y,I,E,C,v,w,O,R,z,A,se,wt,oe,kt,le,St,ae,te,xe,Ot;function It(k,q){return k[6]?mn:gn}let De=It(r),re=De(r),D=!r[6]&&Jt(r);return se=new nn({props:{composition:r[0],layer:r[2],layerClasses:r[5]}}),oe=new ln({props:{layer:r[2],effects:r[4]}}),le=new un({props:{layer:r[2]}}),ae=new dn({props:{layer:r[2],images:r[3]}}),{c(){e=b("div"),t=b("div"),n=b("h2"),i=$("Layer "),o=$(s),c=L(),l=b("div"),u=b("button"),d=$("▲"),f=L(),a=b("div"),p=b("button"),h=$("▼"),I=L(),E=b("div"),C=b("button"),C.textContent="✕",v=L(),w=b("div"),O=b("button"),re.c(),R=L(),D&&D.c(),z=L(),A=b("div"),Ee(se.$$.fragment),wt=L(),Ee(oe.$$.fragment),kt=L(),Ee(le.$$.fragment),St=L(),Ee(ae.$$.fragment),u.disabled=g=r[1]===r[8].length-1,p.disabled=y=r[1]===0,S(t,"class","header container svelte-1op7pzl"),S(A,"class","controls container svelte-1op7pzl"),Ct(A,"hidden",!r[6]),S(e,"class","layer container svelte-1op7pzl")},m(k,q){T(k,e,q),m(e,t),m(t,n),m(n,i),m(n,o),m(t,c),m(t,l),m(l,u),m(u,d),m(t,f),m(t,a),m(a,p),m(p,h),m(t,I),m(t,E),m(E,C),m(t,v),m(t,w),m(w,O),re.m(O,null),m(t,R),D&&D.m(t,null),m(e,z),m(e,A),he(se,A,null),m(A,wt),he(oe,A,null),m(A,kt),he(le,A,null),m(A,St),he(ae,A,null),te=!0,xe||(Ot=[H(u,"click",r[11]),H(p,"click",r[12]),H(C,"click",r[13]),H(O,"click",r[14])],xe=!0)},p(k,[q]){(!te||q&2)&&s!==(s=k[1]+1+"")&&Z(o,s),(!te||q&258&&g!==(g=k[1]===k[8].length-1))&&(u.disabled=g),(!te||q&2&&y!==(y=k[1]===0))&&(p.disabled=y),De!==(De=It(k))&&(re.d(1),re=De(k),re&&(re.c(),re.m(O,null))),k[6]?D&&(D.d(1),D=null):D?D.p(k,q):(D=Jt(k),D.c(),D.m(t,null));const Ue={};q&1&&(Ue.composition=k[0]),q&4&&(Ue.layer=k[2]),q&32&&(Ue.layerClasses=k[5]),se.$set(Ue);const et={};q&4&&(et.layer=k[2]),q&16&&(et.effects=k[4]),oe.$set(et);const Lt={};q&4&&(Lt.layer=k[2]),le.$set(Lt);const tt={};q&4&&(tt.layer=k[2]),q&8&&(tt.images=k[3]),ae.$set(tt),(!te||q&64)&&Ct(A,"hidden",!k[6])},i(k){te||(K(se.$$.fragment,k),K(oe.$$.fragment,k),K(le.$$.fragment,k),K(ae.$$.fragment,k),te=!0)},o(k){x(se.$$.fragment,k),x(oe.$$.fragment,k),x(le.$$.fragment,k),x(ae.$$.fragment,k),te=!1},d(k){k&&M(e),re.d(),D&&D.d(),de(se),de(oe),de(le),de(ae),xe=!1,ve(Ot)}}}function yn(r,e,t){let n,i,s,o=G,c=()=>(o(),o=ke(n,v=>t(9,s=v)),n);r.$$.on_destroy.push(()=>o());let{composition:l}=e,{pos:u}=e,{layer:d}=e,{images:g}=e,{effects:f}=e,{layerClasses:a}=e,p=!0;const h=l.observable;mr(r,h,v=>t(8,i=v));const y=()=>{l.moveLayer(d,!0)},I=()=>{l.moveLayer(d,!1)},E=()=>{l.removeLayer(d)},C=()=>{t(6,p=!p)};return r.$$set=v=>{"composition"in v&&t(0,l=v.composition),"pos"in v&&t(1,u=v.pos),"layer"in v&&t(2,d=v.layer),"images"in v&&t(3,g=v.images),"effects"in v&&t(4,f=v.effects),"layerClasses"in v&&t(5,a=v.layerClasses)},r.$$.update=()=>{r.$$.dirty&4&&c(t(7,n=d.observable))},[l,u,d,g,f,a,p,n,i,s,h,y,I,E,C]}class bn extends Oe{constructor(e){super(),Se(this,e,yn,pn,we,{composition:0,pos:1,layer:2,images:3,effects:4,layerClasses:5})}}function Nt(r,e,t){const n=r.slice();return n[10]=e[t],n[12]=t,n}function Qt(r){let e,t,n,i;return{c(){e=b("div"),t=b("button"),t.textContent="Generate GIF",S(t,"class","svelte-14uqgk4")},m(s,o){T(s,e,o),m(e,t),n||(i=H(t,"click",r[5]),n=!0)},p:G,d(s){s&&M(e),n=!1,i()}}}function _n(r){let e,t=r[4].length+"",n,i;return{c(){e=b("p"),n=$(t),i=$(" layer(s)")},m(s,o){T(s,e,o),m(e,n),m(e,i)},p(s,o){o&16&&t!==(t=s[4].length+"")&&Z(n,t)},d(s){s&&M(e)}}}function vn(r){let e,t,n;return{c(){e=b("h2"),e.textContent="Generating GIF...",t=L(),n=b("p"),n.textContent="Your browser might ask you to allow pop-ups"},m(i,s){T(i,e,s),T(i,t,s),T(i,n,s)},p:G,d(i){i&&M(e),i&&M(t),i&&M(n)}}}function wn(r){let e;return{c(){e=b("p"),e.textContent="Loading..."},m(t,n){T(t,e,n)},p:G,d(t){t&&M(e)}}}function xt(r){let e,t=[],n=new Map,i,s,o,c,l,u,d=r[4];const g=f=>f[10].id;for(let f=0;f<d.length;f+=1){let a=Nt(r,d,f),p=g(a);n.set(p,t[f]=er(p,a))}return{c(){e=b("div");for(let f=0;f<t.length;f+=1)t[f].c();i=L(),s=b("div"),o=b("button"),o.textContent="Add a layer",S(s,"class","block"),S(e,"class","content container svelte-14uqgk4")},m(f,a){T(f,e,a);for(let p=0;p<t.length;p+=1)t[p].m(e,null);m(e,i),m(e,s),m(s,o),c=!0,l||(u=H(o,"click",r[6]),l=!0)},p(f,a){a&22&&(d=f[4],ir(),t=Sr(t,a,g,1,f,d,n,e,kr,er,i,Nt),sr())},i(f){if(!c){for(let a=0;a<d.length;a+=1)K(t[a]);c=!0}},o(f){for(let a=0;a<t.length;a+=1)x(t[a]);c=!1},d(f){f&&M(e);for(let a=0;a<t.length;a+=1)t[a].d();l=!1,u()}}}function er(r,e){let t,n,i;return n=new bn({props:{composition:e[2],pos:e[12],layer:e[10].layer,images:e[1],effects:Ir,layerClasses:Te}}),{key:r,first:null,c(){t=b("div"),Ee(n.$$.fragment),S(t,"class","block"),this.first=t},m(s,o){T(s,t,o),he(n,t,null),i=!0},p(s,o){e=s;const c={};o&4&&(c.composition=e[2]),o&16&&(c.pos=e[12]),o&16&&(c.layer=e[10].layer),o&2&&(c.images=e[1]),n.$set(c)},i(s){i||(K(n.$$.fragment,s),i=!0)},o(s){x(n.$$.fragment,s),i=!1},d(s){s&&M(t),de(n)}}}function kn(r){let e,t,n,i,s,o,c,l,u,d,g,f,a,p,h,y=r[0]==="ready"&&Qt(r);function I(w,O){if(w[0]==="loading")return wn;if(w[0]==="generating")return vn;if(w[0]==="ready")return _n}let E=I(r),C=E&&E(r),v=r[0]==="ready"&&xt(r);return{c(){e=b("main"),t=b("div"),n=b("div"),n.innerHTML=`<div><h2>The</h2></div> 
            <div><img class="ogx3 svelte-14uqgk4" src="./ogx3.svg" alt="OGx3"/></div> 
            <div><h1>Odoo GIF</h1></div> 
            <div><p>open-source generator</p></div>`,i=L(),s=b("div"),o=b("div"),c=b("canvas"),l=L(),u=b("div"),d=b("canvas"),g=L(),y&&y.c(),f=L(),a=b("div"),C&&C.c(),p=L(),v&&v.c(),S(n,"class","title svelte-14uqgk4"),S(c,"id","preview"),S(c,"width",V.width),S(c,"height",V.height),S(d,"id","generation"),S(d,"class","hidden"),S(d,"width",V.width),S(d,"height",V.height),S(s,"class","gifs container svelte-14uqgk4"),S(t,"class","sidebar container svelte-14uqgk4"),S(e,"class","svelte-14uqgk4")},m(w,O){T(w,e,O),m(e,t),m(t,n),m(t,i),m(t,s),m(s,o),m(o,c),m(s,l),m(s,u),m(u,d),m(s,g),y&&y.m(s,null),m(s,f),m(s,a),C&&C.m(a,null),m(e,p),v&&v.m(e,null),h=!0},p(w,[O]){w[0]==="ready"?y?y.p(w,O):(y=Qt(w),y.c(),y.m(s,f)):y&&(y.d(1),y=null),E===(E=I(w))&&C?C.p(w,O):(C&&C.d(1),C=E&&E(w),C&&(C.c(),C.m(a,null))),w[0]==="ready"?v?(v.p(w,O),O&1&&K(v,1)):(v=xt(w),v.c(),K(v,1),v.m(e,null)):v&&(ir(),x(v,1,1,()=>{v=null}),sr())},i(w){h||(K(v),h=!0)},o(w){x(v),h=!1},d(w){w&&M(e),y&&y.d(),C&&C.d(),v&&v.d()}}}function Sn(r,e,t){let n,i=G,s=()=>(i(),i=ke(g,h=>t(4,n=h)),g);r.$$.on_destroy.push(()=>i());const o=Math.ceil(1e3/V.fps);let c="loading";const l={};let u=0,d=null,g=null;s();const f=()=>{c==="ready"&&(t(0,c="generating"),Promise.allSettled(Object.values(l).map(h=>Promise.allSettled(Object.values(h).map(y=>y.promise)))).then(()=>{const h=Pt("generation",{willReadFrequently:!0}),y=new qt(h,V.framecount);for(const E of d.layersData)y.addLayer(E.layer,null);const I=new GIF({width:V.width,height:V.height});for(let E=0;E<V.framecount;E++)y.render(E),I.addFrame(h,{copy:!0,delay:o});I.on("finished",E=>{window.open(URL.createObjectURL(E)),t(0,c="ready")}),I.render()}))},a=()=>{d.render(u),window.requestAnimationFrame(a)};return br(()=>{t(2,d=new qt(Pt("preview"),V.framecount)),s(t(3,g=d.observable));const h=[];for(const y in it){t(1,l[y]={},l);for(const I in it[y]){const E=new Promise((C,v)=>{const w=new Image;w.onload=C,w.onerror=v,w.src=`./images/${y}/${I}.gif`}).catch(()=>{});h.push(E),t(1,l[y][I]=new en(y,I,it[y][I],".png"),l)}}Promise.allSettled(h).finally(()=>{setInterval(()=>{u++,u===V.framecount&&(u=0)},o),a(),t(0,c="ready")})}),[c,l,d,g,n,f,()=>{d.addLayer(new Te["full-frame"].static,null)}]}class On extends Oe{constructor(e){super(),Se(this,e,Sn,kn,we,{})}}new On({target:document.getElementById("app")});
